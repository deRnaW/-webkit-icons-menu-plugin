function IconsMenu() {	var $menu;	var menuItemsOption = {		/*"title":{			"url":"target"		}*/		"weibo":{			"http://weibo.com/yuner1460":""		},		"deRnaW":{			"http://dernaw.blog.163.com":"_blank"		},		"bilibili":{			"http://www.bilibili.tv":"_blank"		}	};/*	var menuStyle = {		//seletor:cssText		"#iconsMenu":"position:absolute;",		"#iconsMenu ul":"list-style:none;margin:0;padding:0;",		"#iconsMenu li":"margin-bottom:3px;"	}*/	function getElem(tar) {		return document.querySelectorAll(tar);	}	function print(msg){		console.log(msg);	}	function parsePixel (num){		return num + "px";	}	function createElem(tar) {		return document.createElement(tar);	}	function createMenuItem(menuItemsOption){//need to opt		var $tmp = document.createDocumentFragment();		var $items = menuItemsOption || this.menuItemsOption;		var $title,$link, itemBox;		for ($title in $items) {			for ($link in $items[$title]){				itemBox = document.createElement('li');				itemBox.innerHTML = "<a href=\"" + $link + "\" target=\"" + $items[$title][$link] + "\">" + $title + "</a>";				$tmp.appendChild(itemBox);				itemBox = null;			}		}		return $tmp;	}	/*function setCSS(menuStyle){		var i, target;		var menuStyle = menuStyle || this.menuStyle;		for (i in menuStyle){			target = getElem(i);			var ind = 0, index = target.length;			for (;ind<index;ind++){				target[ind].style.cssText = menuStyle[i];			}		}	}*/	//return init();	function getRelMousePos (evt){		return {			x:evt.pageX,			y:evt.pageY		};	}	function menuHandler(evt){		if ( evt.button==2 && ( evt.toElement.tagName!='svg' && evt.toElement.tagName!='polyline' ) ) {			var pos = getRelMousePos(evt);			$menu.style.top = parsePixel(pos.y+1);			$menu.style.left = parsePixel(pos.x+1);			$menu.style.display = "block";			document.oncontextmenu = function (){return false;}		}else {			$menu.style.display = "none";		}	}	this.init = function () {		var $body = getElem('body')[0];		$menu = createElem('div');		var $menuContainer = createElem('ul');		var $menuItems = createMenuItem(menuItemsOption);		$menu.setAttribute('id','derek-iconsMenu');		$menuContainer.appendChild($menuItems);		$menu.appendChild($menuContainer);		$body.appendChild($menu);		document.addEventListener('mouseup',menuHandler,true);	}}var $iconsMenu = new IconsMenu();$iconsMenu.init();